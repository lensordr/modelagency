<!DOCTYPE html>
<html>
<head>
    <title>{{ restaurant_name }} - Business Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>{{ restaurant_name }} - Business Dashboard</h1>
        <p>Welcome, {{ user.username }}!</p>
        
        <div class="dashboard-sections">
            <div class="section">
                <h2>Tables</h2>
                <div id="tables-container"></div>
            </div>
            
            <div class="section">
                <h2>Menu Management</h2>
                <button onclick="loadMenu()">Manage Menu</button>
            </div>
            
            <div class="section">
                <h2>Sales</h2>
                <button onclick="loadSales()">View Sales</button>
            </div>
            
            <div class="section">
                <h2>Waiters</h2>
                <button onclick="loadWaiters()">Manage Waiters</button>
            </div>
        </div>
        
        <button onclick="logout()">Logout</button>
    </div>
    
    <script src="/static/business.js"></script>
    <script>
        function logout() {
            localStorage.removeItem('token');
            window.location.href = '/business/login';
        }
        
        // Load tables on page load
        loadTables();
        
        async function loadTables() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/business/tables', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const tables = await response.json();
                
                const container = document.getElementById('tables-container');
                container.innerHTML = tables.map(table => `
                    <div class="table-item ${table.status}">
                        Table ${table.number} - ${table.status}
                        ${table.checkout_requested ? ' (Checkout Requested)' : ''}
                        ${table.has_extra_order ? ' (New Order)' : ''}
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading tables:', error);
            }
        }
        
        function loadMenu() { alert('Menu management - implement as needed'); }
        function loadSales() { alert('Sales view - implement as needed'); }
        function loadWaiters() { alert('Waiter management - implement as needed'); }
    </script>
</body>
</html>